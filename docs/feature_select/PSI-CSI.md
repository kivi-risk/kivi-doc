---

### 1. PSIï¼ˆPopulation Stability Indexï¼‰

#### 1.1 ç†è®ºåˆ†æ

- PSI åæ˜ äº†éªŒè¯æ ·æœ¬åœ¨å„åˆ†æ•°æ®µçš„åˆ†å¸ƒä¸å»ºæ¨¡æ ·æœ¬åˆ†å¸ƒçš„ç¨³å®šæ€§ã€‚åœ¨å»ºæ¨¡ä¸­ï¼Œæˆ‘ä»¬å¸¸ç”¨æ¥ç­›é€‰ç‰¹å¾å˜é‡ã€è¯„ä¼°æ¨¡å‹ç¨³å®šæ€§ã€‚
- é¢„æœŸåˆ†å¸ƒ: åœ¨å»ºæ¨¡æ—¶é€šå¸¸ä»¥è®­ç»ƒæ ·æœ¬ï¼ˆIn the Sample, INSï¼‰ä½œä¸ºé¢„æœŸåˆ†å¸ƒï¼Œ
- å®é™…åˆ†å¸ƒ: éªŒè¯æ ·æœ¬é€šå¸¸ä½œä¸ºå®é™…åˆ†å¸ƒ; åŒ…æ‹¬æ ·æœ¬å¤–ï¼ˆOut of Sampleï¼ŒOOSï¼‰å’Œè·¨æ—¶é—´æ ·æœ¬ï¼ˆOut of Timeï¼ŒOOTï¼‰ã€‚
- ä¸šåŠ¡å«ä¹‰ï¼šPSIæ•°å€¼è¶Šå°ï¼Œä¸¤ä¸ªåˆ†å¸ƒä¹‹é—´çš„å·®å¼‚å°±è¶Šå°ï¼Œä»£è¡¨è¶Šç¨³å®šã€‚

|PSI èŒƒå›´|ç¨³å®šæ€§|å»ºè®®äº‹é¡¹|
|:----:|:----:|:----:|
|0 - 0.1|å¥½| æ²¡æœ‰å˜åŒ–æˆ–å¾ˆå°‘å˜åŒ–|
|0.1 - 0.25|ç•¥ä¸ç¨³å®š|æœ‰å˜åŒ–ï¼Œç»§ç»­ç›‘æ§åç»­å˜åŒ–|
|å¤§äº 0.25|ä¸ç¨³å®š|å‘ç”Ÿå¾ˆå¤§å˜åŒ–ï¼Œè¿›è¡Œç‰¹å¾é¡¹åˆ†æ|

$$
psi = \sum^{n}_{i=1}(Actucal\\% - Expected\\%) \times ln(\frac{Actucal\\%}{Expected\\%})
$$

**è™½ç„¶PSIå¯ä»¥ç”¨æ¥è¡¡é‡åˆ†æ•°åˆ†å¸ƒçš„å˜åŒ–ï¼Œä½†æ˜¯ä¸èƒ½åæ˜ åˆ†æ•°åˆ†å¸ƒå˜åŒ–çš„èµ°å‘ï¼ˆæ•´ä½“å¾€é«˜åˆ†æ®µåç§»è¿˜æ˜¯å¾€ä½åˆ†æ®µåç§»ï¼‰**

> ç›¸å¯¹ç†µæ•£åº¦ KL(Kullback-Leibler divergence)

- ç›¸å¯¹ç†µå¯ä»¥è¡¡é‡ä¸¤ä¸ªéšæœºåˆ†å¸ƒä¹‹é—´çš„"è·ç¦»â€œã€‚
    - 1ï¼‰å½“ä¸¤ä¸ªéšæœºåˆ†å¸ƒç›¸åŒæ—¶ï¼Œå®ƒä»¬çš„ç›¸å¯¹ç†µä¸ºé›¶ï¼›å½“ä¸¤ä¸ªéšæœºåˆ†å¸ƒçš„å·®åˆ«å¢å¤§æ—¶ï¼Œå®ƒä»¬çš„ç›¸å¯¹ç†µä¹Ÿä¼šå¢å¤§ã€‚
    - 2ï¼‰æ³¨æ„âš ï¸ï¼šç›¸å¯¹ç†µæ˜¯ä¸€ä¸ªä»ä¿¡æ¯è®ºè§’åº¦é‡åŒ–è·ç¦»çš„æŒ‡æ ‡ï¼Œä¸æ•°å­¦æ¦‚å¿µä¸Šçš„è·ç¦»æœ‰æ‰€å·®å¼‚ã€‚æ•°å­¦ä¸Šçš„è·ç¦»éœ€è¦æ»¡è¶³ï¼šéè´Ÿæ€§ã€å¯¹ç§°æ€§ã€åŒä¸€æ€§ã€ä¼ é€’æ€§ç­‰ï¼›è€Œç›¸å¯¹ç†µä¸æ»¡è¶³å¯¹ç§°æ€§ã€‚

$$
KL(P||Q) = - \sum_{x \in X} P(X) log\frac{1}{P(X)} + \sum_{x \in X} P(x) log\frac{1}{Q(x)}\\ 
$$
$$
KL(P||Q) = \sum_{x \in X} P(X) log\frac{P(x)}{Q(X)}
$$

> KL ä¸ PSI

$$
psi = \sum_{i=1}^{n}(A_i - E_i) \times ln\frac{A_i}{E_i}
$$
$$
psi = \sum_{i=1}^{n}A_i \times ln\frac{A_i}{E_i} + \sum^{n}_{i=1}E_i \times ln\frac{E_i}{A_i}
$$
$$
psi = KL(A||E) + KL(E||A)
$$

#### 1.2 å®ç°ç¤ºä¾‹

> å‚æ•°

- `:param expected:` æœŸæœ›æ•°æ®ã€‚
- `:param actual:` å®é™…æ•°æ®ã€‚
- `:param data_type:` æ•°æ®ç±»å‹ï¼Œcontinue æˆ– categoryã€‚
- `:param bins:` åˆ†ç®±æ•°ç›®ã€‚
- `:param cut_type:` åˆ†ç®±ç±»å‹ distance æˆ– frequencyã€‚
- `:param cutpoint:` åˆ†ç®±æˆªæ–­ç‚¹ã€‚

> ç¤ºä¾‹

```python
psi = PSI()
df_psi = psi.fit(expected, actual, data_type='continue', bins=10, cut_type='distance')
```

> ç»“æœè¯´æ˜

- `index`: `PSI` åˆ†ç®±è´¡çŒ®ã€‚
- `psi`: æŒ‡æ ‡`PSI`å€¼ã€‚

### 2. `CSI` (Characteristic Stability Index)

**ç‰¹å¾ç¨³å®šæ€§æŒ‡æ ‡ï¼Œç”¨æ¥è¡¡é‡ç‰¹å¾å±‚é¢çš„å˜åŒ–ã€‚**å½“è¯„åˆ†å¡ä¸»æ¨¡å‹åˆ†æ•°å‘ç”Ÿå˜åŒ–æ—¶ï¼Œ
å¯¹æ¯ä¸ªç‰¹å¾è®¡ç®—CSIï¼Œå¯ä»¥çŸ¥é“å“ªäº›ç‰¹å¾åˆ†å¸ƒå‘ç”Ÿå˜åŒ–ä»è€Œå¯¼è‡´çš„è¯„åˆ†å¡ä¸»æ¨¡å‹åˆ†æ•°åç§»
ä»¥åŠå“ªä¸ªç‰¹å¾å¯¹æ¨¡å‹å¾—åˆ†å˜åŒ–çš„å½±å“æœ€å¤§ã€‚å› æ­¤ç›‘æ§ç‰¹å¾çš„CSIæŒ‡æ ‡å¯ä»¥åœ¨è¯„åˆ†å¡ä¸»æ¨¡å‹å‘ç”Ÿåç§»æ—¶å¿«é€Ÿå®šä½é—®é¢˜ã€‚
ä¸€èˆ¬æ¥è¯´ï¼Œç‰¹å¾å±‚é¢çš„ç›‘æ§æ—¢åŒ…å«äº†PSIï¼Œä¹ŸåŒ…å«äº†CSIã€‚

> å…¬å¼: 

$$
CSI = \sum_{i=1}^{n}(Actual_i\\%-Expected_i\\%)Score_i
$$

> è®¡ç®—æ­¥éª¤: 
1. ä»¥è®­ç»ƒæ ·æœ¬ä½œä¸ºé¢„æœŸåˆ†å¸ƒ(`Excepted`)ï¼Œæ ¹æ®è¯„åˆ†å¡ä¸»æ¨¡å‹è®­ç»ƒè¿‡ç¨‹ä¸­æ¯ä¸ªç‰¹å¾çš„åˆ†ç®±é˜ˆå€¼ï¼Œ
å¯¹é¢„æœŸæ ·æœ¬è¿›è¡Œåˆ†ç®±ï¼Œå¾—åˆ°æ¯ç®±æ ·æœ¬å æ¯”ï¼ˆè¯¥ç®±æ ·æœ¬æ•°/æ€»æ ·æœ¬æ•°ï¼‰ã€‚
2. æŒ‰é¢„æœŸåˆ†å¸ƒåˆ†ç®±é˜ˆå€¼å¯¹å®é™…åˆ†å¸ƒ(`Actual`)è¿›è¡Œåˆ†ç®±ï¼Œè®¡ç®—æ¯ç®±æ ·æœ¬å æ¯”ã€‚
3. æŒ‰å…¬å¼ **(å®é™…å æ¯”-é¢„æœŸå æ¯”)*æ¯ç®±å¾—åˆ†** è®¡ç®—æ¯ç®±çš„åˆ†æ•°åå·®ã€‚
4. ç´¯åŠ æ¯ç®±çš„åˆ†æ•°åå·®å¾—åˆ°æœ€åçš„`CSI`ã€‚

> æ³¨æ„: 

- `ä¸åŒå˜é‡ä¹‹é—´çš„CSIæ˜¯ä¸å¯æ¯”çš„ï¼š`ç”±CSIçš„è®¡ç®—å…¬å¼å¯çŸ¥ï¼Œå½±å“å…¶è®¡ç®—ç»“æœçš„å› ç´ é™¤äº†ç‰¹å¾åˆ†å¸ƒçš„å˜åŒ–å¤–ï¼Œè¿˜åŒ…æ‹¬ç‰¹å¾å¯¹ä¸»æ¨¡å‹å¾—åˆ†çš„â€œè´¡çŒ®â€ã€‚
ä¾‹å¦‚ï¼Œå¯¹äºå˜é‡Aå’ŒBï¼Œå˜é‡Aå¯¹ä¸»æ¨¡å‹çš„è´¡çŒ®è¿œå¤§äºå˜é‡Bï¼Œè¿™ä¼šå¯¼è‡´å˜é‡Aåˆ†å¸ƒçš„è½»å¾®å˜åŒ–æ—¶çš„CSIå¯èƒ½ä¹Ÿè¿œå¤§äºå˜é‡Båˆ†å¸ƒå‘ç”Ÿå·¨å¤§å˜åŒ–æ—¶çš„CSIã€‚
- å› ä¸ºCSIçš„è®¡ç®—æ¶‰åŠç‰¹å¾ä¸åŒåˆ†ç®±çš„å¾—åˆ†ï¼Œå› æ­¤è¯¥æŒ‡æ ‡å¹¶ä¸é€‚ç”¨äºä¸€èˆ¬çš„æœºå™¨å­¦ä¹ æ¨¡å‹ï¼ˆæ ‘æ¨¡å‹ç­‰ï¼‰ã€‚
- åœ¨è¯„åˆ†å¡çš„è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œç‰¹å¾æ¯ä¸ªåˆ†ç®±çš„å¾—åˆ†å¾€å¾€å­˜åœ¨æœ‰æ­£æœ‰è´Ÿï¼Œè¿™å¯¹CSIçš„è®¡ç®—æ²¡æœ‰å½±å“ã€‚
- æ¯ä¸ªåˆ†ç®±è®¡ç®—å¾—åˆ°çš„åˆ†æ•°åå·®çš„ç»å¯¹å€¼ï¼Œåæ˜ äº†è¯¥ç‰¹å¾å½“å‰åˆ†ç®±åˆ†å¸ƒçš„å˜åŒ–å¯¹æ¨¡å‹æ•´ä½“åˆ†æ•°çš„å½±å“ã€‚
å½“è¯¥ç‰¹å¾çš„`CSIä¸ºæ­£`æ—¶ï¼Œåˆ™è¡¨æ˜è¯¥ç‰¹å¾åˆ†å¸ƒå˜åŒ–ä½¿æ¨¡å‹å¾—åˆ†å¾€`é«˜åˆ†åç§»`ï¼Œå½“`CSIä¸ºè´Ÿæ—¶ï¼Œåˆ™ç›¸å`ã€‚

## ç‰¹å¾ç¨³å®šæ€§æŒ‡æ ‡ - CSI

`CSI` (Characteristic Stability Index)


---

> ğŸ“š Reference

- [1] [é£æ§æ¨¡å‹â€”ç¾¤ä½“ç¨³å®šæ€§æŒ‡æ ‡(PSI)æ·±å…¥ç†è§£åº”ç”¨](https://zhuanlan.zhihu.com/p/79682292)
- [2] [è¯„åˆ†å¡æ¨¡å‹ç›‘æ§ï¼ˆä¸€ï¼‰PSI & CSI](https://zhuanlan.zhihu.com/p/94619990)
